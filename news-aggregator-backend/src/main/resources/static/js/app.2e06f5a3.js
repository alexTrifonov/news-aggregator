(function(e){function t(t){for(var s,n,l=t[0],i=t[1],m=t[2],u=0,c=[];u<l.length;u++)n=l[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&c.push(a[n][0]),a[n]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);p&&p(t);while(c.length)c.shift()();return o.push.apply(o,m||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],s=!0,l=1;l<r.length;l++){var i=r[l];0!==a[i]&&(s=!1)}s&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var s={},a={app:0},o=[];function n(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=s,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var m=0;m<l.length;m++)t(l[m]);var p=i;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var s=r("85ec"),a=r.n(s);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Aggregator")],1)},o=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"container"},[e._m(0),r("alert-error",{attrs:{message:e.messageErrorNewsTemplate,showAlert:e.showErrorNewsTemplate,id:"alert-error-news-template"}}),r("alert-error",{attrs:{message:e.messageErrorListNewsTemplate,showAlert:e.showErrorListNewsTemplate,id:"alert-error-list-news-template"}}),r("alert-error",{attrs:{message:e.messageErrorNews,showAlert:e.showErrorNews,id:"alert-error-news"}}),r("alert-error",{attrs:{message:e.messageClientError,showAlert:e.showClientError,id:"alert-client-error"}}),r("alert-error",{attrs:{message:e.messageUnknownError,showAlert:e.showUnknownError,id:"alert-unknown-error"}}),r("div",{staticClass:"row my-4"},[r("div",{staticClass:"col lg-6"},[r("label",{attrs:{for:"news-template-list"}},[e._v("Список источников новостей")]),r("ul",{staticClass:"list-group",attrs:{id:"news-template-list"}},e._l(e.filteredNewsTemplate,(function(t){return r("li",{key:t.id,staticClass:"list-group-item py-2",attrs:{value:t}},[e._v(e._s(t.sourceUrl))])})),0)]),r("div",{staticClass:"col lg-6"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.submitNewsTemplate(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"input-url"}},[e._v("URL ленты новостей")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.sourceUrl,expression:"sourceUrl"}],staticClass:"form-control",attrs:{type:"text",id:"input-url",placeholder:""},domProps:{value:e.sourceUrl},on:{input:function(t){t.target.composing||(e.sourceUrl=t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"input-itemTemplate"}},[e._v("Шаблон элемента с новостью")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.itemTemplate,expression:"itemTemplate"}],staticClass:"form-control",attrs:{type:"text",id:"input-itemTemplate",placeholder:""},domProps:{value:e.itemTemplate},on:{input:function(t){t.target.composing||(e.itemTemplate=t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"input-linkTemplate"}},[e._v("Шаблон адреса новости")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.linkTemplate,expression:"linkTemplate"}],staticClass:"form-control",attrs:{type:"text",id:"input-linkTemplate",placeholder:""},domProps:{value:e.linkTemplate},on:{input:function(t){t.target.composing||(e.linkTemplate=t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"input-timeTemplate"}},[e._v("Шаблон времени новости")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.timeTemplate,expression:"timeTemplate"}],staticClass:"form-control",attrs:{type:"text",id:"input-timeTemplate",placeholder:""},domProps:{value:e.timeTemplate},on:{input:function(t){t.target.composing||(e.timeTemplate=t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"input-titleTemplate"}},[e._v("Шаблон заголовка новости")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.titleTemplate,expression:"titleTemplate"}],staticClass:"form-control",attrs:{type:"text",id:"input-titleTemplate",placeholder:""},domProps:{value:e.titleTemplate},on:{input:function(t){t.target.composing||(e.titleTemplate=t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"input-type"}},[e._v("Тип ленты новостей")]),r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"sourceType",id:"sourceTypeWeb",value:"website",checked:""},domProps:{checked:e._q(e.type,"website")},on:{change:function(t){e.type="website"}}}),r("label",{staticClass:"form-check-label",attrs:{for:"exampleRadios1"}},[e._v("Website")])]),r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"sourceType",id:"sourceTypeRss",value:"rss"},domProps:{checked:e._q(e.type,"rss")},on:{change:function(t){e.type="rss"}}}),r("label",{staticClass:"form-check-label",attrs:{for:"exampleRadios2"}},[e._v("Rss")])])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"input-timeZone"}},[e._v("Временная зона источника новостей")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.timeZone,expression:"timeZone"}],staticClass:"form-control",attrs:{type:"text",id:"input-timeZone",placeholder:"UTC+03:00"},domProps:{value:e.timeZone},on:{input:function(t){t.target.composing||(e.timeZone=t.target.value)}}})]),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Добавить источник новостей")])])])]),e._m(1),r("div",{staticClass:"row my-4"},[r("div",{staticClass:"col lg-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"input-titleSubstring"}},[e._v("Подстрока в заголовке")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.titleSubstring,expression:"titleSubstring"}],staticClass:"form-control",attrs:{type:"text",id:"input-titleSubstring"},domProps:{value:e.titleSubstring},on:{input:function(t){t.target.composing||(e.titleSubstring=t.target.value)}}})])]),r("div",{staticClass:"col lg-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"select-newsTemplate"}},[e._v("Источник новостей")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedNewsTemplate,expression:"selectedNewsTemplate"}],staticClass:"form-control",attrs:{id:"select-newsTemplate"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedNewsTemplate=t.target.multiple?r:r[0]}}},e._l(e.newsTemplates,(function(t){return r("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.sourceUrl))])})),0)]),r("div",{staticClass:"row justify-content-center my-4"},[r("button",{staticClass:"btn btn-primary",on:{click:e.getNews}},[e._v("Показать новости")])])])]),r("vue-good-table",{attrs:{columns:e.columns,rows:e.rows,styleClass:"vgt-table condensed bordered","pagination-options":{enabled:!0,mode:"pages",perPageDropdown:[10,15,20]}},scopedSlots:e._u([{key:"table-row",fn:function(t){return["link"==t.column.field?r("span",[r("a",{attrs:{href:t.row.link}},[e._v(e._s(t.row.link))])]):r("span",[e._v(e._s(t.formattedRow[t.column.field]))])]}}])})],1)])},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-header"},[r("h3",[e._v("Добавление источника новостей")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-header"},[r("h3",[e._v("Список новостей")])])}],i=(r("4de4"),r("4160"),r("498a"),r("9911"),r("159b"),r("96cf"),r("1da1")),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-alert",{attrs:{show:e.showAlert,variant:"danger",dismissible:"",fade:""},on:{dismissed:function(t){e.showAlert=!1}}},[e._v(" "+e._s(e.message)+" ")])],1)},p=[],u={name:"Alert",props:{message:String,showAlert:Boolean}},c=u,d=r("2877"),f=Object(d["a"])(c,m,p,!1,null,"b2159df8",null),w=f.exports,v=r("bc3a"),g=r.n(v),h=g.a.create({baseURL:"/api"}),T=(r("dac4"),r("f617")),b={name:"Aggregator",components:{"alert-error":w,VueGoodTable:T["a"]},data:function(){return{newsTemplates:[],sourceUrl:"",itemTemplate:"",linkTemplate:"",timeTemplate:"",titleTemplate:"",type:"website",timeZone:"",absLink:!1,titleSubstring:"",selectedNewsTemplate:null,columns:[{label:"Дата",field:"pubDate"},{label:"Заголовок",field:"title"},{label:"Адрес",field:"link"}],rows:[],errors:[],showFormError:!1,showErrorNewsTemplate:!1,messageErrorNewsTemplate:"Ошибка добавления шаблона новостей на стороне сервера",showErrorListNewsTemplate:!1,messageErrorListNewsTemplate:"Ошибка получения шаблонов новостей на стороне сервера",showErrorNews:!1,messageErrorNews:"Ошибка получения новостей на стороне сервера",messageClientError:"",showClientError:!1,messageUnknownError:"",showUnknownError:!1}},mounted:function(){this.newsTemplateList()},computed:{filteredNewsTemplate:function(){return this.newsTemplates.filter((function(e){return null!=e.id}))}},methods:{newsTemplateList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.get("/news-templates").then((function(t){return e.newsTemplates=t.data,e.newsTemplates.unshift({id:null,sourceUrl:""}),e.selectedNewsTemplate=0!=e.newsTemplates.length?e.newsTemplates[0]:{id:null,sourceUrl:""},e.showClientError=!1,e.showUnknownError=!1})).catch((function(t){t.response?("SERVER_ERROR"===t.response.data.error&&(e.messageErrorNewsTemplate="Ошибка получения списка шаблонов новостей на стороне сервера."),e.showErrorListNewsTemplate=!0):t.request?(e.messageClientError="Ошибка сети",e.showClientError=!0):(e.messageUnknownError="Неизвестная ошибка",e.showUnknownError=!0)}));case 2:case"end":return t.stop()}}),t)})))()},submitNewsTemplate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.post("/news-template",{sourceUrl:e.sourceUrl.trim(),itemTemplate:e.itemTemplate.trim(),linkTemplate:e.linkTemplate.trim(),timeTemplate:e.timeTemplate.trim(),titleTemplate:e.titleTemplate.trim(),type:e.type,timeZone:e.timeZone.trim()}).then(e.showErrorNewsTemplate=!1,e.showClientError=!1,e.showUnknownError=!1).catch((function(t){t.response?("USER_ERROR"===t.response.data.error?e.messageErrorNewsTemplate="Ошибка добавления шаблона новостей со стороны клиента":"SERVER_ERROR"===t.response.data.error&&(e.messageErrorNewsTemplate=t.response.data.error_message),e.showErrorNewsTemplate=!0):t.request?(e.messageClientError="Ошибка сети",e.showClientError=!0):(e.messageUnknownError="Неизвестная ошибка",e.showUnknownError=!0)}));case 2:e.sourceUrl="",e.itemTemplate="",e.linkTemplate="",e.timeTemplate="",e.titleTemplate="",e.type="website",e.timeZone="",e.newsTemplateList();case 4:case"end":return t.stop()}}),t)})))()},getNews:function(){var e=this;this.rows=[],this.errors=[],h.get("/news",{params:{idStr:this.selectedNewsTemplate.id,title:this.titleSubstring}}).then((function(t){return e.rows=e.fillRows(t.data),e.showErrorNews=!1,e.showClientError=!1,e.showUnknownError=!1})).catch((function(t){t.response?("USER_ERROR"===t.response.data.error?e.messageErrorNews="Ошибка запроса новостей со стороны клиента. В запросе некорректно указан идентификатор шаблона новости":"SERVER_ERROR"===t.response.data.error&&(e.messageErrorNews="Ошибка запроса новостей. Внутренняя ошибка сервера."),e.showErrorNews=!0):t.request?(e.messageClientError="Ошибка сети",e.showClientError=!0):(e.messageUnknownError="Неизвестная ошибка",e.showUnknownError=!0)}))},fillRows:function(e){var t=[];return e.forEach((function(e){var r={id:e.id,pubDate:e.pubDate,title:e.title,link:e.link};t.push(r)})),t}}},E=b,y=Object(d["a"])(E,n,l,!1,null,"3fac3a3d",null),_=y.exports,C={name:"App",components:{Aggregator:_}},k=C,N=(r("034f"),Object(d["a"])(k,a,o,!1,null,null,null)),R=N.exports,x=r("5f5b"),U=r("b1e0");r("f9e3"),r("2dd8");s["default"].config.productionTip=!1,s["default"].use(x["a"]),s["default"].use(U["a"]),new s["default"]({render:function(e){return e(R)}}).$mount("#app")},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.2e06f5a3.js.map